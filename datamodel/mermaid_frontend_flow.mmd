---
id: 42839b89-6c94-40be-8a54-e17296222dfa
---
flowchart LR
  subgraph OverviewTab["Overview tab"]
    Snapshot["get_dashboard_data snapshot"]
    Accounts["accounts push"]
    PortfolioValues["portfolio_values push"]
    PortfolioPositions["portfolio_positions push"]
    LastFileUpdate["last_file_update push"]
    PanelsUpdated["panels_updated event"]

    Snapshot --> HeaderCard["Header card (legacy fields + push mirror)"]
    Snapshot --> EurTable["Liquidity table (initial render)"]
    Snapshot --> FxTable["FX accounts table (initial render)"]
    Snapshot --> PortfolioTable["Investment table (initial render)"]
    Snapshot --> FooterCard["Footer metadata card"]
    Accounts --> EurTable
    Accounts --> FxTable
    PortfolioValues --> PortfolioTable
    PortfolioPositions --> ExpandableRows["Expandable holdings rows"]
    PortfolioPositions --> DetailLaunchers["Security detail openers"]
    LastFileUpdate --> FooterCard

    PanelsUpdated -.routes.-> EurTable
    PanelsUpdated -.routes.-> FxTable
    PanelsUpdated -.routes.-> PortfolioTable
    PanelsUpdated -.routes.-> ExpandableRows
  end

  subgraph SecurityTab["Security detail tabs"]
    SecuritySnapshot["security_snapshot payload"]
    SecurityHistory["security_history payload"]
    PanelsUpdatedDetail["panels_updated (portfolio_positions)"]

    SecuritySnapshot --> DetailHeader["Meta grid (price, holdings, gains)"]
    SecuritySnapshot --> DetailInfoBar["Info bar (range context)"]
    SecuritySnapshot --> AverageTooltips["Average cost tooltips"]
    SecurityHistory --> HistoryChart["History chart & placeholder"]

    PanelsUpdatedDetail -.invalidates.-> SecuritySnapshot
    PanelsUpdatedDetail -.invalidates.-> SecurityHistory
  end

  PanelsUpdatedDetailNote["panels_updated carries the portfolio_positions refresh event"]
  PanelsUpdatedDetail -.-> PanelsUpdatedDetailNote
