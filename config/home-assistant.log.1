2025-11-10 22:29:04.931 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration pp_reader which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2025-11-10 22:29:05.919 INFO (MainThread) [homeassistant.setup] Setting up system_log
2025-11-10 22:29:05.920 INFO (MainThread) [homeassistant.setup] Setting up http
2025-11-10 22:29:05.923 WARNING (MainThread) [aiohttp_fast_zlib] zlib_ng and isal are not available, falling back to zlib, performance will be degraded.
2025-11-10 22:29:05.998 INFO (MainThread) [homeassistant.setup] Setup of domain logger took 0.08 seconds
2025-11-10 22:29:05.998 INFO (MainThread) [homeassistant.setup] Setup of domain system_log took 0.08 seconds
2025-11-10 22:29:05.998 INFO (MainThread) [homeassistant.setup] Setup of domain http took 0.08 seconds
2025-11-10 22:29:05.998 INFO (MainThread) [homeassistant.setup] Setting up websocket_api
2025-11-10 22:29:05.999 INFO (MainThread) [homeassistant.setup] Setup of domain websocket_api took 0.00 seconds
2025-11-10 22:29:05.999 INFO (MainThread) [homeassistant.setup] Setting up network
2025-11-10 22:29:06.001 INFO (MainThread) [homeassistant.setup] Setup of domain network took 0.00 seconds
2025-11-10 22:29:06.001 INFO (MainThread) [homeassistant.bootstrap] Setting up stage frontend: {'frontend'}; already set up: {}
Dependencies: {'device_automation', 'auth', 'config', 'diagnostics', 'onboarding', 'api', 'file_upload', 'lovelace', 'search', 'repairs'}; already set up: {'http', 'websocket_api', 'system_log'}
2025-11-10 22:29:06.001 INFO (MainThread) [homeassistant.setup] Setting up api
2025-11-10 22:29:06.002 INFO (MainThread) [homeassistant.setup] Setup of domain api took 0.00 seconds
2025-11-10 22:29:06.002 INFO (MainThread) [homeassistant.setup] Setting up auth
2025-11-10 22:29:06.003 INFO (MainThread) [homeassistant.setup] Setup of domain auth took 0.00 seconds
2025-11-10 22:29:06.003 INFO (MainThread) [homeassistant.setup] Setting up config
2025-11-10 22:29:06.006 INFO (MainThread) [homeassistant.setup] Setup of domain config took 0.00 seconds
2025-11-10 22:29:06.006 INFO (MainThread) [homeassistant.setup] Setting up device_automation
2025-11-10 22:29:06.006 INFO (MainThread) [homeassistant.setup] Setup of domain device_automation took 0.00 seconds
2025-11-10 22:29:06.006 INFO (MainThread) [homeassistant.setup] Setting up diagnostics
2025-11-10 22:29:06.007 INFO (MainThread) [homeassistant.setup] Setup of domain diagnostics took 0.00 seconds
2025-11-10 22:29:06.007 INFO (MainThread) [homeassistant.setup] Setting up file_upload
2025-11-10 22:29:06.007 INFO (MainThread) [homeassistant.setup] Setup of domain file_upload took 0.00 seconds
2025-11-10 22:29:06.008 INFO (MainThread) [homeassistant.setup] Setting up onboarding
2025-11-10 22:29:06.008 INFO (MainThread) [homeassistant.setup] Setup of domain onboarding took 0.00 seconds
2025-11-10 22:29:06.008 INFO (MainThread) [homeassistant.setup] Setting up lovelace
2025-11-10 22:29:06.009 INFO (MainThread) [homeassistant.setup] Setup of domain lovelace took 0.00 seconds
2025-11-10 22:29:06.009 INFO (MainThread) [homeassistant.setup] Setting up repairs
2025-11-10 22:29:06.010 INFO (MainThread) [homeassistant.setup] Setup of domain repairs took 0.00 seconds
2025-11-10 22:29:06.010 INFO (MainThread) [homeassistant.setup] Setting up search
2025-11-10 22:29:06.010 INFO (MainThread) [homeassistant.setup] Setup of domain search took 0.00 seconds
2025-11-10 22:29:06.010 INFO (MainThread) [homeassistant.setup] Setting up frontend
2025-11-10 22:29:06.016 INFO (MainThread) [homeassistant.setup] Setup of domain frontend took 0.01 seconds
2025-11-10 22:29:06.017 INFO (MainThread) [homeassistant.bootstrap] Setting up stage recorder: {'recorder'}; already set up: {}
Dependencies: {}; already set up: {}
2025-11-10 22:29:06.017 INFO (MainThread) [homeassistant.setup] Setting up recorder
2025-11-10 22:29:06.019 INFO (MainThread) [homeassistant.components.http] Now listening on port 8123
2025-11-10 22:29:06.020 INFO (MainThread) [homeassistant.setup] Setup of domain http took 0.00 seconds
2025-11-10 22:29:06.054 INFO (MainThread) [homeassistant.setup] Setup of domain recorder took 0.04 seconds
2025-11-10 22:29:06.054 INFO (MainThread) [homeassistant.bootstrap] Nothing to set up in stage debugger: {'debugpy'}
2025-11-10 22:29:06.054 INFO (MainThread) [homeassistant.bootstrap] Setting up stage zeroconf: {'zeroconf'}; already set up: {}
Dependencies: {}; already set up: {'http', 'websocket_api', 'api', 'network'}
2025-11-10 22:29:06.054 INFO (MainThread) [homeassistant.setup] Setting up zeroconf
2025-11-10 22:29:06.058 INFO (MainThread) [homeassistant.components.zeroconf] Starting Zeroconf broadcast
2025-11-10 22:29:06.058 INFO (MainThread) [homeassistant.setup] Setup of domain zeroconf took 0.00 seconds
2025-11-10 22:29:06.058 INFO (MainThread) [homeassistant.bootstrap] Setting up stage 1: {'dhcp', 'ssdp', 'usb', 'bluetooth', 'cloud'}; already set up: {}
Dependencies: {'tts', 'backup', 'conversation', 'wake_word', 'stt', 'ffmpeg', 'webhook', 'intent', 'assist_pipeline'}; already set up: {'auth', 'websocket_api', 'network', 'http', 'repairs'}
2025-11-10 22:29:06.060 INFO (MainThread) [homeassistant.setup] Setting up backup
2025-11-10 22:29:06.060 INFO (MainThread) [homeassistant.setup] Setting up webhook
2025-11-10 22:29:06.061 INFO (MainThread) [homeassistant.setup] Setup of domain webhook took 0.00 seconds
2025-11-10 22:29:06.064 INFO (MainThread) [homeassistant.setup] Setup of domain backup took 0.00 seconds
2025-11-10 22:29:06.068 INFO (MainThread) [homeassistant.setup] Setting up ffmpeg
2025-11-10 22:29:06.084 INFO (MainThread) [homeassistant.setup] Setting up intent
2025-11-10 22:29:06.084 INFO (MainThread) [homeassistant.setup] Setup of domain intent took 0.00 seconds
2025-11-10 22:29:06.088 INFO (MainThread) [homeassistant.setup] Setting up wake_word
2025-11-10 22:29:06.088 INFO (MainThread) [homeassistant.setup] Setup of domain wake_word took 0.00 seconds
2025-11-10 22:29:06.097 INFO (MainThread) [homeassistant.setup] Setting up stt
2025-11-10 22:29:06.098 INFO (MainThread) [homeassistant.setup] Setup of domain stt took 0.00 seconds
2025-11-10 22:29:06.222 INFO (MainThread) [homeassistant.setup] Setting up dhcp
2025-11-10 22:29:06.223 INFO (MainThread) [homeassistant.setup] Setup of domain dhcp took 0.00 seconds
2025-11-10 22:29:06.244 INFO (MainThread) [homeassistant.setup] Setup of domain ffmpeg took 0.18 seconds
2025-11-10 22:29:06.261 INFO (MainThread) [homeassistant.setup] Setting up ssdp
2025-11-10 22:29:06.266 INFO (MainThread) [homeassistant.setup] Setup of domain ssdp took 0.00 seconds
2025-11-10 22:29:06.277 INFO (MainThread) [homeassistant.setup] Setting up usb
2025-11-10 22:29:06.277 INFO (MainThread) [homeassistant.setup] Setup of domain usb took 0.00 seconds
2025-11-10 22:29:06.363 INFO (MainThread) [homeassistant.setup] Setting up conversation
2025-11-10 22:29:06.364 INFO (MainThread) [homeassistant.setup] Setup of domain conversation took 0.00 seconds
2025-11-10 22:29:06.388 INFO (MainThread) [homeassistant.setup] Setting up tts
2025-11-10 22:29:06.392 INFO (MainThread) [homeassistant.setup] Setup of domain tts took 0.00 seconds
2025-11-10 22:29:06.400 INFO (MainThread) [homeassistant.setup] Setting up bluetooth
2025-11-10 22:29:06.420 INFO (MainThread) [homeassistant.setup] Setting up event
2025-11-10 22:29:06.420 INFO (MainThread) [homeassistant.setup] Setup of domain event took 0.00 seconds
2025-11-10 22:29:06.421 INFO (MainThread) [homeassistant.setup] Setting up sensor
2025-11-10 22:29:06.421 INFO (MainThread) [homeassistant.setup] Setup of domain sensor took 0.00 seconds
2025-11-10 22:29:06.447 INFO (MainThread) [homeassistant.components.event] Setting up backup.event
2025-11-10 22:29:06.449 INFO (MainThread) [homeassistant.components.sensor] Setting up backup.sensor
2025-11-10 22:29:06.468 ERROR (MainThread) [habluetooth.manager] Missing required permissions for Bluetooth management: Missing NET_ADMIN/NET_RAW capabilities for Bluetooth management. Automatic adapter recovery is unavailable. Add NET_ADMIN and NET_RAW capabilities to the container to enable it
2025-11-10 22:29:06.469 INFO (MainThread) [homeassistant.setup] Setup of domain bluetooth took 0.07 seconds
2025-11-10 22:29:06.469 INFO (MainThread) [habluetooth.channels.bluez] Bluetooth management socket connection closed
2025-11-10 22:29:06.476 INFO (MainThread) [homeassistant.setup] Setting up assist_pipeline
2025-11-10 22:29:06.477 INFO (MainThread) [homeassistant.setup] Setup of domain assist_pipeline took 0.00 seconds
2025-11-10 22:29:06.613 INFO (MainThread) [homeassistant.setup] Setting up cloud
2025-11-10 22:29:06.616 INFO (MainThread) [homeassistant.setup] Setup of domain cloud took 0.00 seconds
2025-11-10 22:29:06.617 INFO (MainThread) [homeassistant.bootstrap] Setting up stage 2: {'radio_browser', 'shopping_list', 'person', 'met', 'script', 'input_boolean', 'hardware', 'input_text', 'google_translate', 'analytics', 'input_number', 'tag', 'application_credentials', 'scene', 'timer', 'schedule', 'input_datetime', 'counter', 'input_button', 'automation', 'sun', 'default_config', 'pp_reader', 'input_select', 'system_health', 'zone'}; already set up: {'logger', 'frontend', 'backup', 'network', 'homeassistant'}
Dependencies: {'mobile_app', 'go2rtc', 'history', 'logbook', 'energy', 'image_upload', 'file', 'usage_prediction', 'homeassistant_alerts', 'my', 'camera', 'media_source', 'stream', 'trace', 'blueprint'}; already set up: {'usb', 'ffmpeg', 'file_upload', 'cloud', 'search', 'repairs', 'dhcp', 'frontend', 'system_log', 'websocket_api', 'conversation', 'diagnostics', 'onboarding', 'api', 'lovelace', 'zeroconf', 'tts', 'auth', 'backup', 'config', 'stt', 'http', 'intent', 'device_automation', 'ssdp', 'recorder', 'bluetooth', 'wake_word', 'network', 'webhook', 'assist_pipeline'}
2025-11-10 22:29:06.617 INFO (MainThread) [homeassistant.setup] Setting up scene
2025-11-10 22:29:06.617 INFO (MainThread) [homeassistant.components.scene] Setting up homeassistant.scene
2025-11-10 22:29:06.619 INFO (MainThread) [homeassistant.setup] Setup of domain scene took 0.00 seconds
2025-11-10 22:29:06.619 INFO (MainThread) [homeassistant.setup] Setting up camera
2025-11-10 22:29:06.620 INFO (MainThread) [homeassistant.setup] Setup of domain camera took 0.00 seconds
2025-11-10 22:29:06.621 INFO (MainThread) [homeassistant.setup] Setting up image_upload
2025-11-10 22:29:06.622 INFO (MainThread) [homeassistant.setup] Setup of domain image_upload took 0.00 seconds
2025-11-10 22:29:06.623 INFO (MainThread) [homeassistant.setup] Setting up zone
2025-11-10 22:29:06.624 INFO (MainThread) [homeassistant.setup] Setup of domain zone took 0.00 seconds
2025-11-10 22:29:06.624 INFO (MainThread) [homeassistant.setup] Setting up person
2025-11-10 22:29:06.625 INFO (MainThread) [homeassistant.setup] Setting up blueprint
2025-11-10 22:29:06.625 INFO (MainThread) [homeassistant.setup] Setup of domain blueprint took 0.00 seconds
2025-11-10 22:29:06.625 INFO (MainThread) [homeassistant.setup] Setting up trace
2025-11-10 22:29:06.625 INFO (MainThread) [homeassistant.setup] Setup of domain trace took 0.00 seconds
2025-11-10 22:29:06.625 INFO (MainThread) [homeassistant.setup] Setting up script
2025-11-10 22:29:06.626 INFO (MainThread) [homeassistant.setup] Setup of domain script took 0.00 seconds
2025-11-10 22:29:06.626 INFO (MainThread) [homeassistant.setup] Setting up stream
2025-11-10 22:29:06.626 INFO (MainThread) [homeassistant.setup] Setting up input_boolean
2025-11-10 22:29:06.627 INFO (MainThread) [homeassistant.setup] Setup of domain input_boolean took 0.00 seconds
2025-11-10 22:29:06.627 INFO (MainThread) [homeassistant.setup] Setting up history
2025-11-10 22:29:06.628 INFO (MainThread) [homeassistant.setup] Setup of domain history took 0.00 seconds
2025-11-10 22:29:06.628 INFO (MainThread) [homeassistant.setup] Setting up logbook
2025-11-10 22:29:06.629 INFO (MainThread) [homeassistant.setup] Setup of domain logbook took 0.00 seconds
2025-11-10 22:29:06.629 INFO (MainThread) [homeassistant.setup] Setting up input_number
2025-11-10 22:29:06.631 INFO (MainThread) [homeassistant.setup] Setup of domain input_number took 0.00 seconds
2025-11-10 22:29:06.631 INFO (MainThread) [homeassistant.setup] Setting up timer
2025-11-10 22:29:06.632 INFO (MainThread) [homeassistant.setup] Setup of domain timer took 0.00 seconds
2025-11-10 22:29:06.632 INFO (MainThread) [homeassistant.setup] Setting up input_button
2025-11-10 22:29:06.633 INFO (MainThread) [homeassistant.setup] Setup of domain input_button took 0.00 seconds
2025-11-10 22:29:06.634 INFO (MainThread) [homeassistant.setup] Setting up automation
2025-11-10 22:29:06.634 INFO (MainThread) [homeassistant.setup] Setup of domain automation took 0.00 seconds
2025-11-10 22:29:06.635 INFO (MainThread) [homeassistant.setup] Setting up media_source
2025-11-10 22:29:06.635 INFO (MainThread) [homeassistant.setup] Setup of domain media_source took 0.00 seconds
2025-11-10 22:29:06.636 INFO (MainThread) [homeassistant.setup] Setting up input_select
2025-11-10 22:29:06.644 INFO (MainThread) [homeassistant.setup] Setup of domain input_select took 0.01 seconds
2025-11-10 22:29:06.644 INFO (MainThread) [homeassistant.setup] Setting up system_health
2025-11-10 22:29:06.645 INFO (MainThread) [homeassistant.setup] Setup of domain system_health took 0.00 seconds
2025-11-10 22:29:06.646 INFO (MainThread) [homeassistant.setup] Setup of domain person took 0.02 seconds
2025-11-10 22:29:06.834 INFO (MainThread) [homeassistant.setup] Setup of domain stream took 0.21 seconds
2025-11-10 22:29:06.836 INFO (MainThread) [homeassistant.setup] Setting up radio_browser
2025-11-10 22:29:06.837 INFO (MainThread) [homeassistant.setup] Setup of domain radio_browser took 0.00 seconds
2025-11-10 22:29:06.845 INFO (MainThread) [homeassistant.setup] Setting up shopping_list
2025-11-10 22:29:06.845 INFO (MainThread) [homeassistant.setup] Setup of domain shopping_list took 0.00 seconds
2025-11-10 22:29:06.849 INFO (MainThread) [homeassistant.setup] Setting up usage_prediction
2025-11-10 22:29:06.849 INFO (MainThread) [homeassistant.setup] Setup of domain usage_prediction took 0.00 seconds
2025-11-10 22:29:06.854 INFO (MainThread) [homeassistant.setup] Setting up met
2025-11-10 22:29:06.854 INFO (MainThread) [homeassistant.setup] Setup of domain met took 0.00 seconds
2025-11-10 22:29:06.858 INFO (MainThread) [homeassistant.setup] Setting up tag
2025-11-10 22:29:06.859 INFO (MainThread) [homeassistant.setup] Setup of domain tag took 0.00 seconds
2025-11-10 22:29:06.865 INFO (MainThread) [homeassistant.setup] Setting up hardware
2025-11-10 22:29:06.871 INFO (MainThread) [homeassistant.setup] Setting up homeassistant_alerts
2025-11-10 22:29:06.871 INFO (MainThread) [homeassistant.setup] Setup of domain homeassistant_alerts took 0.00 seconds
2025-11-10 22:29:06.880 INFO (MainThread) [homeassistant.setup] Setting up input_text
2025-11-10 22:29:06.882 INFO (MainThread) [homeassistant.setup] Setup of domain input_text took 0.00 seconds
2025-11-10 22:29:06.891 INFO (MainThread) [homeassistant.setup] Setting up google_translate
2025-11-10 22:29:06.891 INFO (MainThread) [homeassistant.setup] Setup of domain google_translate took 0.00 seconds
2025-11-10 22:29:06.892 INFO (MainThread) [homeassistant.setup] Setup of domain hardware took 0.03 seconds
2025-11-10 22:29:06.900 INFO (MainThread) [homeassistant.setup] Setting up energy
2025-11-10 22:29:06.900 INFO (MainThread) [homeassistant.setup] Setup of domain energy took 0.00 seconds
2025-11-10 22:29:06.903 INFO (MainThread) [homeassistant.setup] Setting up application_credentials
2025-11-10 22:29:06.904 INFO (MainThread) [homeassistant.setup] Setup of domain application_credentials took 0.00 seconds
2025-11-10 22:29:06.916 INFO (MainThread) [homeassistant.setup] Setting up schedule
2025-11-10 22:29:06.918 INFO (MainThread) [homeassistant.setup] Setup of domain schedule took 0.00 seconds
2025-11-10 22:29:06.967 INFO (MainThread) [homeassistant.setup] Setting up go2rtc
2025-11-10 22:29:06.967 INFO (MainThread) [homeassistant.setup] Setup of domain go2rtc took 0.00 seconds
2025-11-10 22:29:06.969 INFO (MainThread) [homeassistant.setup] Setting up input_datetime
2025-11-10 22:29:06.970 INFO (MainThread) [homeassistant.setup] Setup of domain input_datetime took 0.00 seconds
2025-11-10 22:29:06.972 INFO (MainThread) [homeassistant.setup] Setting up counter
2025-11-10 22:29:06.973 INFO (MainThread) [homeassistant.setup] Setup of domain counter took 0.00 seconds
2025-11-10 22:29:06.975 INFO (MainThread) [homeassistant.setup] Setting up sun
2025-11-10 22:29:06.976 INFO (MainThread) [homeassistant.setup] Setup of domain sun took 0.00 seconds
2025-11-10 22:29:06.978 INFO (MainThread) [homeassistant.setup] Setting up binary_sensor
2025-11-10 22:29:06.978 INFO (MainThread) [homeassistant.setup] Setup of domain binary_sensor took 0.00 seconds
2025-11-10 22:29:06.980 INFO (MainThread) [homeassistant.components.binary_sensor] Setting up sun.binary_sensor
2025-11-10 22:29:06.980 INFO (MainThread) [homeassistant.components.sensor] Setting up sun.sensor
2025-11-10 22:29:06.986 INFO (MainThread) [homeassistant.setup] Setting up file
2025-11-10 22:29:06.987 INFO (MainThread) [homeassistant.setup] Setup of domain file took 0.00 seconds
2025-11-10 22:29:06.988 INFO (MainThread) [homeassistant.setup] Setting up my
2025-11-10 22:29:06.988 INFO (MainThread) [homeassistant.setup] Setup of domain my took 0.00 seconds
2025-11-10 22:29:07.099 INFO (MainThread) [homeassistant.setup] Setting up pp_reader
2025-11-10 22:29:07.100 DEBUG (MainThread) [custom_components.pp_reader] Panel-Placeholder 'ppreader' registriert
2025-11-10 22:29:07.101 INFO (MainThread) [homeassistant.setup] Setup of domain pp_reader took 0.00 seconds
2025-11-10 22:29:07.103 INFO (MainThread) [homeassistant.setup] Setting up todo
2025-11-10 22:29:07.116 INFO (MainThread) [homeassistant.setup] Setup of domain todo took 0.01 seconds
2025-11-10 22:29:07.118 INFO (MainThread) [homeassistant.components.todo] Setting up shopping_list.todo
2025-11-10 22:29:07.327 INFO (MainThread) [homeassistant.setup] Setting up mobile_app
2025-11-10 22:29:07.327 INFO (MainThread) [homeassistant.setup] Setting up notify
2025-11-10 22:29:07.328 INFO (MainThread) [homeassistant.setup] Setup of domain notify took 0.00 seconds
2025-11-10 22:29:07.328 INFO (MainThread) [homeassistant.setup] Setup of domain mobile_app took 0.00 seconds
2025-11-10 22:29:07.328 INFO (MainThread) [homeassistant.components.notify] Setting up notify.mobile_app
2025-11-10 22:29:07.328 INFO (MainThread) [homeassistant.setup] Setting up default_config
2025-11-10 22:29:07.328 INFO (MainThread) [homeassistant.setup] Setup of domain default_config took 0.00 seconds
2025-11-10 22:29:07.339 INFO (MainThread) [homeassistant.components.tts] Setting up google_translate.tts
2025-11-10 22:29:07.339 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Preis-Spalten bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.343 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'avg_price_native' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.343 INFO (MainThread) [homeassistant.components.sensor] Setting up energy.sensor
2025-11-10 22:29:07.348 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Kaufpreis-Erweiterungsspalten bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.349 INFO (MainThread) [homeassistant.setup] Setting up analytics
2025-11-10 22:29:07.349 INFO (MainThread) [homeassistant.setup] Setup of domain analytics took 0.00 seconds
2025-11-10 22:29:07.350 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'security_currency_total' erforderlich
2025-11-10 22:29:07.351 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'account_currency_total' erforderlich
2025-11-10 22:29:07.352 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'avg_price_security' erforderlich
2025-11-10 22:29:07.352 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'avg_price_account' erforderlich
2025-11-10 22:29:07.352 INFO (MainThread) [homeassistant.setup] Setting up weather
2025-11-10 22:29:07.353 INFO (MainThread) [homeassistant.setup] Setup of domain weather took 0.00 seconds
2025-11-10 22:29:07.354 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'avg_price_security' in 'portfolio_securities' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.354 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'avg_price_account' in 'portfolio_securities' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.355 INFO (MainThread) [homeassistant.components.weather] Setting up met.weather
2025-11-10 22:29:07.356 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'fetched_at' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.356 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'data_source' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.356 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provider' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.356 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provenance' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.356 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'fetched_at' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.356 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'data_source' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.356 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provider' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.356 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provenance' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.358 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'fetched_at' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.358 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'data_source' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.358 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provider' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.358 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provenance' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.360 DEBUG (SyncWorker_3) [custom_components.pp_reader.data.migrations.cleanup] No legacy portfolio_securities columns detected - skipping cleanup
2025-11-10 22:29:07.378 INFO (MainThread) [custom_components.pp_reader] Preis-Debug Option=OFF (globale Logger-Konfiguration kann DEBUG-Ausgaben dennoch anzeigen) effective={'custom_components.pp_reader.prices': 'INFO', 'custom_components.pp_reader.prices.price_service': 'INFO', 'custom_components.pp_reader.prices.yahooquery_provider': 'INFO', 'custom_components.pp_reader.prices.revaluation': 'INFO', 'custom_components.pp_reader.prices.symbols': 'INFO', 'custom_components.pp_reader.prices.provider_base': 'INFO'}
2025-11-10 22:29:07.378 INFO (MainThread) [custom_components.pp_reader] Ersetze vorhandenes Panel 'ppreader' (alt=None) durch entry_id=01K6FR7D88ZFYD6MHSYRW1ZDXF
2025-11-10 22:29:07.383 INFO (MainThread) [custom_components.pp_reader.data.coordinator] Dateiänderung erkannt, starte Datenaktualisierung...
2025-11-10 22:29:07.482 ERROR (MainThread) [custom_components.pp_reader.data.coordinator] Unerwarteter Fehler im Parserlauf
Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 418, in _sync_portfolio_file
    parsed_client = await parser_pipeline.async_parse_portfolio(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 79, in async_parse_portfolio
    parsed_client = await hass.async_add_executor_job(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        _build_parsed_client, proto_client
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/andreas/.pyenv/versions/3.13.3/lib/python3.13/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 153, in _build_parsed_client
    securities = list(_iter_securities(proto_client))
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 200, in _iter_securities
    parsed_security = parsed.ParsedSecurity.from_proto(security)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 328, in from_proto
    ParsedSecurityEvent.from_proto(event) for event in security.events
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 215, in from_proto
    data=_parse_any_sequence(getattr(event, "data", [])),
         ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 131, in _parse_any_sequence
    return [_parse_any_value(value) for value in values]
            ~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 98, in _parse_any_value
    kind = value.WhichOneof("value")
ValueError: Protocol message PAnyValue has no "value" field.
2025-11-10 22:29:07.484 ERROR (MainThread) [custom_components.pp_reader.data.coordinator] Fehler beim Laden der Daten
Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 418, in _sync_portfolio_file
    parsed_client = await parser_pipeline.async_parse_portfolio(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 79, in async_parse_portfolio
    parsed_client = await hass.async_add_executor_job(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        _build_parsed_client, proto_client
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/andreas/.pyenv/versions/3.13.3/lib/python3.13/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 153, in _build_parsed_client
    securities = list(_iter_securities(proto_client))
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 200, in _iter_securities
    parsed_security = parsed.ParsedSecurity.from_proto(security)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 328, in from_proto
    ParsedSecurityEvent.from_proto(event) for event in security.events
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 215, in from_proto
    data=_parse_any_sequence(getattr(event, "data", [])),
         ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 131, in _parse_any_sequence
    return [_parse_any_value(value) for value in values]
            ~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 98, in _parse_any_value
    kind = value.WhichOneof("value")
ValueError: Protocol message PAnyValue has no "value" field.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 331, in _async_update_data
    await self._sync_portfolio_file(last_update_truncated)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 449, in _sync_portfolio_file
    raise UpdateFailed(msg) from exc
homeassistant.helpers.update_coordinator.UpdateFailed: Parserlauf fehlgeschlagen
2025-11-10 22:29:07.487 DEBUG (MainThread) [custom_components.pp_reader.data.coordinator] Finished fetching pp_reader data in 0.105 seconds (success: False)
2025-11-10 22:29:07.487 ERROR (MainThread) [custom_components.pp_reader] Fehler beim Setup des Config Entries
Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 418, in _sync_portfolio_file
    parsed_client = await parser_pipeline.async_parse_portfolio(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 79, in async_parse_portfolio
    parsed_client = await hass.async_add_executor_job(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        _build_parsed_client, proto_client
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/andreas/.pyenv/versions/3.13.3/lib/python3.13/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 153, in _build_parsed_client
    securities = list(_iter_securities(proto_client))
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 200, in _iter_securities
    parsed_security = parsed.ParsedSecurity.from_proto(security)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 328, in from_proto
    ParsedSecurityEvent.from_proto(event) for event in security.events
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 215, in from_proto
    data=_parse_any_sequence(getattr(event, "data", [])),
         ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 131, in _parse_any_sequence
    return [_parse_any_value(value) for value in values]
            ~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 98, in _parse_any_value
    kind = value.WhichOneof("value")
ValueError: Protocol message PAnyValue has no "value" field.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 331, in _async_update_data
    await self._sync_portfolio_file(last_update_truncated)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 449, in _sync_portfolio_file
    raise UpdateFailed(msg) from exc
homeassistant.helpers.update_coordinator.UpdateFailed: Parserlauf fehlgeschlagen

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/venv-ha/lib/python3.13/site-packages/homeassistant/helpers/update_coordinator.py", line 403, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 380, in _async_update_data
    raise UpdateFailed(msg) from e
homeassistant.helpers.update_coordinator.UpdateFailed: Update fehlgeschlagen: Parserlauf fehlgeschlagen

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/__init__.py", line 693, in async_setup_entry
    await coordinator.async_config_entry_first_refresh()
  File "/home/andreas/coding/repos/ha-pp-reader/venv-ha/lib/python3.13/site-packages/homeassistant/helpers/update_coordinator.py", line 304, in async_config_entry_first_refresh
    await self._async_config_entry_first_refresh()
  File "/home/andreas/coding/repos/ha-pp-reader/venv-ha/lib/python3.13/site-packages/homeassistant/helpers/update_coordinator.py", line 336, in _async_config_entry_first_refresh
    raise ex
homeassistant.exceptions.ConfigEntryNotReady: Update fehlgeschlagen: Parserlauf fehlgeschlagen
2025-11-10 22:29:07.491 INFO (MainThread) [homeassistant.bootstrap] Home Assistant initialized in 2.56s
2025-11-10 22:29:07.492 INFO (MainThread) [homeassistant.core] Starting Home Assistant 2025.11.1
2025-11-10 22:29:07.499 DEBUG (MainThread) [custom_components.pp_reader] Panel-Placeholder 'ppreader' registriert
2025-11-10 22:29:07.499 INFO (SyncWorker_1) [homeassistant.loader] Loaded thread from homeassistant.components.thread
2025-11-10 22:29:07.499 INFO (SyncWorker_2) [homeassistant.loader] Loaded heos from homeassistant.components.heos
2025-11-10 22:29:07.504 INFO (SyncWorker_0) [homeassistant.loader] Loaded apple_tv from homeassistant.components.apple_tv
2025-11-10 22:29:07.514 INFO (SyncWorker_3) [homeassistant.loader] Loaded home_connect from homeassistant.components.home_connect
2025-11-10 22:29:07.585 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Preis-Spalten bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.604 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'avg_price_native' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.635 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Kaufpreis-Erweiterungsspalten bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.636 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'security_currency_total' erforderlich
2025-11-10 22:29:07.637 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'account_currency_total' erforderlich
2025-11-10 22:29:07.641 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'avg_price_security' erforderlich
2025-11-10 22:29:07.642 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'avg_price_account' erforderlich
2025-11-10 22:29:07.660 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'avg_price_security' in 'portfolio_securities' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.660 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'avg_price_account' in 'portfolio_securities' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.663 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'fetched_at' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.663 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'data_source' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.663 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provider' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.663 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provenance' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.691 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'fetched_at' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.691 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'data_source' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.692 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provider' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:07.692 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provenance' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:08.006 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'fetched_at' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:08.006 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'data_source' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:08.006 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provider' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:08.006 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provenance' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:08.257 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.migrations.cleanup] No legacy portfolio_securities columns detected - skipping cleanup
2025-11-10 22:29:08.641 INFO (MainThread) [custom_components.pp_reader] Preis-Debug Option=OFF (globale Logger-Konfiguration kann DEBUG-Ausgaben dennoch anzeigen) effective={'custom_components.pp_reader.prices': 'INFO', 'custom_components.pp_reader.prices.price_service': 'INFO', 'custom_components.pp_reader.prices.yahooquery_provider': 'INFO', 'custom_components.pp_reader.prices.revaluation': 'INFO', 'custom_components.pp_reader.prices.symbols': 'INFO', 'custom_components.pp_reader.prices.provider_base': 'INFO'}
2025-11-10 22:29:08.641 INFO (MainThread) [custom_components.pp_reader] Ersetze vorhandenes Panel 'ppreader' (alt=None) durch entry_id=01K6FR7D88ZFYD6MHSYRW1ZDXF
2025-11-10 22:29:08.705 INFO (MainThread) [custom_components.pp_reader.data.coordinator] Dateiänderung erkannt, starte Datenaktualisierung...
2025-11-10 22:29:09.488 ERROR (MainThread) [custom_components.pp_reader.data.coordinator] Unerwarteter Fehler im Parserlauf
Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 418, in _sync_portfolio_file
    parsed_client = await parser_pipeline.async_parse_portfolio(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 79, in async_parse_portfolio
    parsed_client = await hass.async_add_executor_job(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        _build_parsed_client, proto_client
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/andreas/.pyenv/versions/3.13.3/lib/python3.13/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 153, in _build_parsed_client
    securities = list(_iter_securities(proto_client))
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 200, in _iter_securities
    parsed_security = parsed.ParsedSecurity.from_proto(security)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 328, in from_proto
    ParsedSecurityEvent.from_proto(event) for event in security.events
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 215, in from_proto
    data=_parse_any_sequence(getattr(event, "data", [])),
         ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 131, in _parse_any_sequence
    return [_parse_any_value(value) for value in values]
            ~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 98, in _parse_any_value
    kind = value.WhichOneof("value")
ValueError: Protocol message PAnyValue has no "value" field.
2025-11-10 22:29:09.535 ERROR (MainThread) [custom_components.pp_reader.data.coordinator] Fehler beim Laden der Daten
Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 418, in _sync_portfolio_file
    parsed_client = await parser_pipeline.async_parse_portfolio(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 79, in async_parse_portfolio
    parsed_client = await hass.async_add_executor_job(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        _build_parsed_client, proto_client
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/andreas/.pyenv/versions/3.13.3/lib/python3.13/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 153, in _build_parsed_client
    securities = list(_iter_securities(proto_client))
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 200, in _iter_securities
    parsed_security = parsed.ParsedSecurity.from_proto(security)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 328, in from_proto
    ParsedSecurityEvent.from_proto(event) for event in security.events
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 215, in from_proto
    data=_parse_any_sequence(getattr(event, "data", [])),
         ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 131, in _parse_any_sequence
    return [_parse_any_value(value) for value in values]
            ~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 98, in _parse_any_value
    kind = value.WhichOneof("value")
ValueError: Protocol message PAnyValue has no "value" field.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 331, in _async_update_data
    await self._sync_portfolio_file(last_update_truncated)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 449, in _sync_portfolio_file
    raise UpdateFailed(msg) from exc
homeassistant.helpers.update_coordinator.UpdateFailed: Parserlauf fehlgeschlagen
2025-11-10 22:29:09.570 DEBUG (MainThread) [custom_components.pp_reader.data.coordinator] Finished fetching pp_reader data in 0.927 seconds (success: False)
2025-11-10 22:29:09.571 ERROR (MainThread) [custom_components.pp_reader] Fehler beim Setup des Config Entries
Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 418, in _sync_portfolio_file
    parsed_client = await parser_pipeline.async_parse_portfolio(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 79, in async_parse_portfolio
    parsed_client = await hass.async_add_executor_job(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        _build_parsed_client, proto_client
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/andreas/.pyenv/versions/3.13.3/lib/python3.13/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 153, in _build_parsed_client
    securities = list(_iter_securities(proto_client))
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 200, in _iter_securities
    parsed_security = parsed.ParsedSecurity.from_proto(security)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 328, in from_proto
    ParsedSecurityEvent.from_proto(event) for event in security.events
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 215, in from_proto
    data=_parse_any_sequence(getattr(event, "data", [])),
         ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 131, in _parse_any_sequence
    return [_parse_any_value(value) for value in values]
            ~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 98, in _parse_any_value
    kind = value.WhichOneof("value")
ValueError: Protocol message PAnyValue has no "value" field.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 331, in _async_update_data
    await self._sync_portfolio_file(last_update_truncated)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 449, in _sync_portfolio_file
    raise UpdateFailed(msg) from exc
homeassistant.helpers.update_coordinator.UpdateFailed: Parserlauf fehlgeschlagen

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/venv-ha/lib/python3.13/site-packages/homeassistant/helpers/update_coordinator.py", line 403, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 380, in _async_update_data
    raise UpdateFailed(msg) from e
homeassistant.helpers.update_coordinator.UpdateFailed: Update fehlgeschlagen: Parserlauf fehlgeschlagen

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/__init__.py", line 693, in async_setup_entry
    await coordinator.async_config_entry_first_refresh()
  File "/home/andreas/coding/repos/ha-pp-reader/venv-ha/lib/python3.13/site-packages/homeassistant/helpers/update_coordinator.py", line 304, in async_config_entry_first_refresh
    await self._async_config_entry_first_refresh()
  File "/home/andreas/coding/repos/ha-pp-reader/venv-ha/lib/python3.13/site-packages/homeassistant/helpers/update_coordinator.py", line 336, in _async_config_entry_first_refresh
    raise ex
homeassistant.exceptions.ConfigEntryNotReady: Update fehlgeschlagen: Parserlauf fehlgeschlagen
2025-11-10 22:29:18.031 INFO (SyncWorker_1) [homeassistant.loader] Loaded denonavr from homeassistant.components.denonavr
2025-11-10 22:29:19.844 DEBUG (MainThread) [custom_components.pp_reader] Panel-Placeholder 'ppreader' registriert
2025-11-10 22:29:19.850 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Preis-Spalten bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.851 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'avg_price_native' bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.851 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Kaufpreis-Erweiterungsspalten bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.852 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'security_currency_total' erforderlich
2025-11-10 22:29:19.853 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'account_currency_total' erforderlich
2025-11-10 22:29:19.853 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'avg_price_security' erforderlich
2025-11-10 22:29:19.853 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'avg_price_account' erforderlich
2025-11-10 22:29:19.854 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'avg_price_security' in 'portfolio_securities' bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.854 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'avg_price_account' in 'portfolio_securities' bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.855 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'fetched_at' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.855 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'data_source' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.855 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provider' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.855 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provenance' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.856 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'fetched_at' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.856 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'data_source' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.856 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provider' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.856 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provenance' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.857 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'fetched_at' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.857 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'data_source' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.857 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provider' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.857 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provenance' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:19.859 DEBUG (SyncWorker_6) [custom_components.pp_reader.data.migrations.cleanup] No legacy portfolio_securities columns detected - skipping cleanup
2025-11-10 22:29:19.865 INFO (MainThread) [custom_components.pp_reader] Preis-Debug Option=OFF (globale Logger-Konfiguration kann DEBUG-Ausgaben dennoch anzeigen) effective={'custom_components.pp_reader.prices': 'INFO', 'custom_components.pp_reader.prices.price_service': 'INFO', 'custom_components.pp_reader.prices.yahooquery_provider': 'INFO', 'custom_components.pp_reader.prices.revaluation': 'INFO', 'custom_components.pp_reader.prices.symbols': 'INFO', 'custom_components.pp_reader.prices.provider_base': 'INFO'}
2025-11-10 22:29:19.865 INFO (MainThread) [custom_components.pp_reader] Ersetze vorhandenes Panel 'ppreader' (alt=None) durch entry_id=01K6FR7D88ZFYD6MHSYRW1ZDXF
2025-11-10 22:29:19.872 INFO (MainThread) [custom_components.pp_reader.data.coordinator] Dateiänderung erkannt, starte Datenaktualisierung...
2025-11-10 22:29:19.971 ERROR (MainThread) [custom_components.pp_reader.data.coordinator] Unerwarteter Fehler im Parserlauf
Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 418, in _sync_portfolio_file
    parsed_client = await parser_pipeline.async_parse_portfolio(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 79, in async_parse_portfolio
    parsed_client = await hass.async_add_executor_job(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        _build_parsed_client, proto_client
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/andreas/.pyenv/versions/3.13.3/lib/python3.13/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 153, in _build_parsed_client
    securities = list(_iter_securities(proto_client))
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 200, in _iter_securities
    parsed_security = parsed.ParsedSecurity.from_proto(security)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 328, in from_proto
    ParsedSecurityEvent.from_proto(event) for event in security.events
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 215, in from_proto
    data=_parse_any_sequence(getattr(event, "data", [])),
         ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 131, in _parse_any_sequence
    return [_parse_any_value(value) for value in values]
            ~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 98, in _parse_any_value
    kind = value.WhichOneof("value")
ValueError: Protocol message PAnyValue has no "value" field.
2025-11-10 22:29:19.973 ERROR (MainThread) [custom_components.pp_reader.data.coordinator] Fehler beim Laden der Daten
Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 418, in _sync_portfolio_file
    parsed_client = await parser_pipeline.async_parse_portfolio(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 79, in async_parse_portfolio
    parsed_client = await hass.async_add_executor_job(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        _build_parsed_client, proto_client
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/andreas/.pyenv/versions/3.13.3/lib/python3.13/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 153, in _build_parsed_client
    securities = list(_iter_securities(proto_client))
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 200, in _iter_securities
    parsed_security = parsed.ParsedSecurity.from_proto(security)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 328, in from_proto
    ParsedSecurityEvent.from_proto(event) for event in security.events
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 215, in from_proto
    data=_parse_any_sequence(getattr(event, "data", [])),
         ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 131, in _parse_any_sequence
    return [_parse_any_value(value) for value in values]
            ~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 98, in _parse_any_value
    kind = value.WhichOneof("value")
ValueError: Protocol message PAnyValue has no "value" field.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 331, in _async_update_data
    await self._sync_portfolio_file(last_update_truncated)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 449, in _sync_portfolio_file
    raise UpdateFailed(msg) from exc
homeassistant.helpers.update_coordinator.UpdateFailed: Parserlauf fehlgeschlagen
2025-11-10 22:29:19.975 DEBUG (MainThread) [custom_components.pp_reader.data.coordinator] Finished fetching pp_reader data in 0.106 seconds (success: False)
2025-11-10 22:29:19.975 ERROR (MainThread) [custom_components.pp_reader] Fehler beim Setup des Config Entries
Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 418, in _sync_portfolio_file
    parsed_client = await parser_pipeline.async_parse_portfolio(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 79, in async_parse_portfolio
    parsed_client = await hass.async_add_executor_job(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        _build_parsed_client, proto_client
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/andreas/.pyenv/versions/3.13.3/lib/python3.13/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 153, in _build_parsed_client
    securities = list(_iter_securities(proto_client))
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 200, in _iter_securities
    parsed_security = parsed.ParsedSecurity.from_proto(security)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 328, in from_proto
    ParsedSecurityEvent.from_proto(event) for event in security.events
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 215, in from_proto
    data=_parse_any_sequence(getattr(event, "data", [])),
         ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 131, in _parse_any_sequence
    return [_parse_any_value(value) for value in values]
            ~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 98, in _parse_any_value
    kind = value.WhichOneof("value")
ValueError: Protocol message PAnyValue has no "value" field.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 331, in _async_update_data
    await self._sync_portfolio_file(last_update_truncated)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 449, in _sync_portfolio_file
    raise UpdateFailed(msg) from exc
homeassistant.helpers.update_coordinator.UpdateFailed: Parserlauf fehlgeschlagen

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/venv-ha/lib/python3.13/site-packages/homeassistant/helpers/update_coordinator.py", line 403, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 380, in _async_update_data
    raise UpdateFailed(msg) from e
homeassistant.helpers.update_coordinator.UpdateFailed: Update fehlgeschlagen: Parserlauf fehlgeschlagen

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/__init__.py", line 693, in async_setup_entry
    await coordinator.async_config_entry_first_refresh()
  File "/home/andreas/coding/repos/ha-pp-reader/venv-ha/lib/python3.13/site-packages/homeassistant/helpers/update_coordinator.py", line 304, in async_config_entry_first_refresh
    await self._async_config_entry_first_refresh()
  File "/home/andreas/coding/repos/ha-pp-reader/venv-ha/lib/python3.13/site-packages/homeassistant/helpers/update_coordinator.py", line 336, in _async_config_entry_first_refresh
    raise ex
homeassistant.exceptions.ConfigEntryNotReady: Update fehlgeschlagen: Parserlauf fehlgeschlagen
2025-11-10 22:29:28.976 INFO (SyncWorker_0) [homeassistant.loader] Loaded playstation_network from homeassistant.components.playstation_network
2025-11-10 22:29:40.333 DEBUG (MainThread) [custom_components.pp_reader] Panel-Placeholder 'ppreader' registriert
2025-11-10 22:29:40.338 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Preis-Spalten bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.339 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'avg_price_native' bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.339 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Kaufpreis-Erweiterungsspalten bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.340 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'security_currency_total' erforderlich
2025-11-10 22:29:40.340 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'account_currency_total' erforderlich
2025-11-10 22:29:40.340 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'avg_price_security' erforderlich
2025-11-10 22:29:40.340 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Keine Aktualisierung für 'avg_price_account' erforderlich
2025-11-10 22:29:40.341 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'avg_price_security' in 'portfolio_securities' bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.341 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'avg_price_account' in 'portfolio_securities' bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.342 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'fetched_at' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.342 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'data_source' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.342 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provider' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.342 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provenance' in 'historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.342 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'fetched_at' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.342 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'data_source' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.342 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provider' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.342 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provenance' in 'fx_rates' bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.343 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'fetched_at' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.343 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'data_source' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.344 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provider' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.344 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.db_init] Runtime-Migration: Spalte 'provenance' in 'ingestion_historical_prices' bereits vorhanden - nichts zu tun
2025-11-10 22:29:40.344 DEBUG (SyncWorker_7) [custom_components.pp_reader.data.migrations.cleanup] No legacy portfolio_securities columns detected - skipping cleanup
2025-11-10 22:29:40.347 INFO (MainThread) [custom_components.pp_reader] Preis-Debug Option=OFF (globale Logger-Konfiguration kann DEBUG-Ausgaben dennoch anzeigen) effective={'custom_components.pp_reader.prices': 'INFO', 'custom_components.pp_reader.prices.price_service': 'INFO', 'custom_components.pp_reader.prices.yahooquery_provider': 'INFO', 'custom_components.pp_reader.prices.revaluation': 'INFO', 'custom_components.pp_reader.prices.symbols': 'INFO', 'custom_components.pp_reader.prices.provider_base': 'INFO'}
2025-11-10 22:29:40.347 INFO (MainThread) [custom_components.pp_reader] Ersetze vorhandenes Panel 'ppreader' (alt=None) durch entry_id=01K6FR7D88ZFYD6MHSYRW1ZDXF
2025-11-10 22:29:40.356 INFO (MainThread) [custom_components.pp_reader.data.coordinator] Dateiänderung erkannt, starte Datenaktualisierung...
2025-11-10 22:29:40.466 ERROR (MainThread) [custom_components.pp_reader.data.coordinator] Unerwarteter Fehler im Parserlauf
Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 418, in _sync_portfolio_file
    parsed_client = await parser_pipeline.async_parse_portfolio(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 79, in async_parse_portfolio
    parsed_client = await hass.async_add_executor_job(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        _build_parsed_client, proto_client
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/andreas/.pyenv/versions/3.13.3/lib/python3.13/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 153, in _build_parsed_client
    securities = list(_iter_securities(proto_client))
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 200, in _iter_securities
    parsed_security = parsed.ParsedSecurity.from_proto(security)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 328, in from_proto
    ParsedSecurityEvent.from_proto(event) for event in security.events
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 215, in from_proto
    data=_parse_any_sequence(getattr(event, "data", [])),
         ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 131, in _parse_any_sequence
    return [_parse_any_value(value) for value in values]
            ~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 98, in _parse_any_value
    kind = value.WhichOneof("value")
ValueError: Protocol message PAnyValue has no "value" field.
2025-11-10 22:29:40.468 ERROR (MainThread) [custom_components.pp_reader.data.coordinator] Fehler beim Laden der Daten
Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 418, in _sync_portfolio_file
    parsed_client = await parser_pipeline.async_parse_portfolio(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 79, in async_parse_portfolio
    parsed_client = await hass.async_add_executor_job(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        _build_parsed_client, proto_client
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/andreas/.pyenv/versions/3.13.3/lib/python3.13/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 153, in _build_parsed_client
    securities = list(_iter_securities(proto_client))
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 200, in _iter_securities
    parsed_security = parsed.ParsedSecurity.from_proto(security)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 328, in from_proto
    ParsedSecurityEvent.from_proto(event) for event in security.events
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 215, in from_proto
    data=_parse_any_sequence(getattr(event, "data", [])),
         ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 131, in _parse_any_sequence
    return [_parse_any_value(value) for value in values]
            ~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 98, in _parse_any_value
    kind = value.WhichOneof("value")
ValueError: Protocol message PAnyValue has no "value" field.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 331, in _async_update_data
    await self._sync_portfolio_file(last_update_truncated)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 449, in _sync_portfolio_file
    raise UpdateFailed(msg) from exc
homeassistant.helpers.update_coordinator.UpdateFailed: Parserlauf fehlgeschlagen
2025-11-10 22:29:40.471 DEBUG (MainThread) [custom_components.pp_reader.data.coordinator] Finished fetching pp_reader data in 0.119 seconds (success: False)
2025-11-10 22:29:40.471 ERROR (MainThread) [custom_components.pp_reader] Fehler beim Setup des Config Entries
Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 418, in _sync_portfolio_file
    parsed_client = await parser_pipeline.async_parse_portfolio(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 79, in async_parse_portfolio
    parsed_client = await hass.async_add_executor_job(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        _build_parsed_client, proto_client
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/andreas/.pyenv/versions/3.13.3/lib/python3.13/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 153, in _build_parsed_client
    securities = list(_iter_securities(proto_client))
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/services/parser_pipeline.py", line 200, in _iter_securities
    parsed_security = parsed.ParsedSecurity.from_proto(security)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 328, in from_proto
    ParsedSecurityEvent.from_proto(event) for event in security.events
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 215, in from_proto
    data=_parse_any_sequence(getattr(event, "data", [])),
         ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 131, in _parse_any_sequence
    return [_parse_any_value(value) for value in values]
            ~~~~~~~~~~~~~~~~^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/models/parsed.py", line 98, in _parse_any_value
    kind = value.WhichOneof("value")
ValueError: Protocol message PAnyValue has no "value" field.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 331, in _async_update_data
    await self._sync_portfolio_file(last_update_truncated)
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 449, in _sync_portfolio_file
    raise UpdateFailed(msg) from exc
homeassistant.helpers.update_coordinator.UpdateFailed: Parserlauf fehlgeschlagen

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/venv-ha/lib/python3.13/site-packages/homeassistant/helpers/update_coordinator.py", line 403, in _async_refresh
    self.data = await self._async_update_data()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/data/coordinator.py", line 380, in _async_update_data
    raise UpdateFailed(msg) from e
homeassistant.helpers.update_coordinator.UpdateFailed: Update fehlgeschlagen: Parserlauf fehlgeschlagen

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andreas/coding/repos/ha-pp-reader/config/custom_components/pp_reader/__init__.py", line 693, in async_setup_entry
    await coordinator.async_config_entry_first_refresh()
  File "/home/andreas/coding/repos/ha-pp-reader/venv-ha/lib/python3.13/site-packages/homeassistant/helpers/update_coordinator.py", line 304, in async_config_entry_first_refresh
    await self._async_config_entry_first_refresh()
  File "/home/andreas/coding/repos/ha-pp-reader/venv-ha/lib/python3.13/site-packages/homeassistant/helpers/update_coordinator.py", line 336, in _async_config_entry_first_refresh
    raise ex
homeassistant.exceptions.ConfigEntryNotReady: Update fehlgeschlagen: Parserlauf fehlgeschlagen
2025-11-10 22:30:09.641 INFO (Recorder) [homeassistant.components.recorder.pool.RecorderPool] Pool recreating
